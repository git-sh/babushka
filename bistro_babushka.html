<!DOCTYPE html>
<html lang="da">
<head>
				<meta charset="utf-8">
				<meta name="viewport" content="width=device-width, initial-scale=1.0">
				<title>Json</title>
				<link type="text/css" rel="stylesheet" href="">
</head>

<body>
			<header>
				<img src="imgs/red_start.svg" alt="">
			</header>
			<nav>
					<button id="filter-alle">Alle</button>
					<button id="filter-forretter">Forretter</button>
					<button id="filter-hovedretter">Hovedretter</button>
					<button id="filter-desserter">Desserter</button>
					<button id="filter-drikkevarer">Drikkevarer</button>
			</nav>
	<main>
				<h1 id="overskrift" datallea-overskrift></h1>
				<section id="menu-container" data-container></section>

	</main>
			<tamplate>
			<article>
				<img src="" alt="" class="info" data-billede>
				<h2 class="info" data-navn></h2>
				<p class="info" data-kortbeskrivelse></p>
				<p>Pris: <span class="info" data-pris></span>,-</p>
			</article>
			</tamplate>
			<footer>
				<section>
					<adress>Adress: <br>Grønnegade 97<br />1234 København K</adress>
					<aside>Abningstider: <br>Mandag - fredag 10:30 - 22:00<br />Lørdag 12:00 - 23:00</aside>
				</section>
			</footer>
	<script>
let retter = [];

		document.addEventListener("DOMContentLoaded", hentJson);
		document.querySelector(".overskrift").textContent=kategori;

async function hentJson() {
	//hent json
	let kategori=location
	let jsonData = await fetch("menu.json");
	retter = await jsonData.json();
	//console.log(retter);
	visRetter(retter);
 	lavFiltre();

}

function visRetter(retter, overskrift) {
	let menuTemplate = document.querySelector("[data-container]");
	let templateModtager = document.querySelector("[data-container]");
	templateModtager.innerHTML = "";
	document.querySelector('[data-overskrift]').textContent = overskrift;

	//for hver ret vis dem i DOM
	retter.forEach(hverRet => {

		//klon template og indsæt ret properties
		let klon = menuTemplate.cloneNode(true).content;
		klon.querySelector("[data-navn]").textContent = hverRet.navn;
		klon.querySelector("[data-kortbeskrivelse]").textContent = hverRet.kortbeskrivelse;
		klon.querySelector("[data-pris]").textContent = hverRet.pris;
		klon.querySelector("[data-billede]").setAttribute("src", "img/small/" + hverRet.billede + "-sm.jpg")
		templateModtager.appendChild(klon);
	});
};

function lavFiltre() {
//find objekter der inderholder valte kategorier
let forretter = retter.filter(ret => ret.kategori == "forretter");
let hovedretter = retter.filter(ret => ret.kategori == "hovedretter");
let desserter = retter.filter(ret => ret.kategori == "desserter");
let drikkevarer = retter.filter(ret => ret.kategori == "drikkevarer");

	//kald visretter med de nye arrays
	document.querySelector('#filter-alle').addEventListener("click", () => {
	visRetter(retter, "Menu") });
	document.querySelector('#filter-forretter').addEventListener("click", () => {
	visRetter(forretter, "Forretter") });
	document.querySelector('#filter-hovedretter').addEventListener("click", () => {
	visRetter(hovedretter, "Hovedretter") });
	document.querySelector('#filter-desserter').addEventListener("click", () => {
	visRetter(desserter, "Desserter") });
	document.querySelector('#filter-drikkevarer').addEventListener("click", () => {
	visRetter(drikkevarer, "Drikkevarer") });
}


	</script>
</body>
</html>
